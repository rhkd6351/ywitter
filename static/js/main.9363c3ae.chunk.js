(this.webpackJsonpywitter=this.webpackJsonpywitter||[]).push([[0],{69:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){},74:function(e,t,c){},75:function(e,t,c){},76:function(e,t,c){},77:function(e,t,c){"use strict";c.r(t);var a=c(10),n=c.n(a),s=c(46),r=c.n(s),i=c(11),o=c(36),l=c(14),u=c(0),j=c.n(u),b=c(1),d=c(47),O=c(51),h=c(48),m=c(52);d.a({apiKey:"AIzaSyDjsY4CxSNlT7by_bS-fF4862Ehbq5fqBo",authDomain:"yweeter-ae7ef.firebaseapp.com",projectId:"yweeter-ae7ef",storageBucket:"yweeter-ae7ef.appspot.com",messagingSenderId:"89780038175",appId:"1:89780038175:web:5eb38006978b5b050d832a"});var f=O,p=h,x=m,g=c(17),v=c(29),y=c(6),w=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(""),r=Object(i.a)(s,2),o=r[0],l=r[1],u=Object(a.useState)(!1),d=Object(i.a)(u,2),O=d[0],h=d[1],m=Object(a.useState)(""),p=Object(i.a)(m,2),x=p[0],w=p[1],N=function(e){var t=e.target,c=t.name,a=t.value;"email"===c&&n(a),"password"===c&&l(a)},S=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!O){e.next=6;break}return e.next=4,f.createUserWithEmailAndPassword(f.getAuth(),c,o).catch((function(e){w(e.message)}));case 4:e.next=8;break;case 6:return e.next=8,f.signInWithEmailAndPassword(f.getAuth(),c,o).catch((function(e){w(e.message)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(b.a)(j.a.mark((function e(t){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(c=t.target.name)?a=new f.GoogleAuthProvider:"github"===c&&(a=new f.GithubAuthProvider),e.next=4,f.signInWithPopup(f.getAuth(),a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("div",{className:"auth-wrapper",children:[Object(y.jsx)("div",{className:"auth-container-left",children:Object(y.jsx)(g.a,{icon:v.c,className:"twitter-icon"})}),Object(y.jsx)("div",{className:"auth-container-right",children:Object(y.jsxs)("div",{className:"auth-container-right-element",children:[Object(y.jsxs)("div",{className:"auth-title",children:["Let's get in Ywitter"," ",Object(y.jsx)(g.a,{icon:v.c,className:"title-twitter-icon",style:{color:"RGB(45, 155, 240)"}})]}),Object(y.jsx)("div",{className:"auth-login-form",children:Object(y.jsxs)("form",{onSubmit:S,children:[Object(y.jsx)("input",{className:"auth-email-input",name:"email",type:"email",placeholder:"email",required:!0,value:c,onChange:N}),Object(y.jsx)("input",{className:"auth-password-input submit",name:"password",type:"password",placeholder:"password",required:!0,value:o,onChange:N}),Object(y.jsx)("br",{}),Object(y.jsx)("input",{className:"auth-submit",type:"submit",value:O?"Create Account":"Sign in",required:!0}),Object(y.jsx)("br",{}),x,Object(y.jsx)("div",{className:"auth-toggle",onClick:function(){h((function(e){return!e})),w(""),n(""),l("")},children:O?"Sign in":"Create Account"}),Object(y.jsx)("br",{})]})}),Object(y.jsxs)("div",{className:"auth-login-social",children:[Object(y.jsxs)("button",{className:"social-login-google",onClick:k,name:"google",children:[Object(y.jsx)(g.a,{icon:v.b})," continue with Google"]}),Object(y.jsxs)("button",{className:"social-login-google",onClick:k,name:"github",children:[Object(y.jsx)(g.a,{icon:v.a})," continue with Github"]})]})]})}),Object(y.jsxs)("div",{className:"auth-footer",children:["Nomad's course (Twitter clone coding) || Lyekwang \xa9"," ",(new Date).getFullYear()]})]})})},N=c(40),S=c(27),k=c(79),C=function(e){var t=e.userObj,c=Object(a.useState)(""),n=Object(i.a)(c,2),s=n[0],r=n[1],o=Object(a.useState)(null),l=Object(i.a)(o,2),u=l[0],d=l[1],O=Object(a.useRef)(null),h=function(){var e=Object(b.a)(j.a.mark((function e(c){var a,n,i,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),a="",null===u){e.next=10;break}return n=x.ref(x.getStorage(),"".concat(t.uid,"/").concat(Object(k.a)())),e.next=6,x.uploadString(n,u,"data_url");case 6:return i=e.sent,e.next=9,x.getDownloadURL(i.ref);case 9:a=e.sent;case 10:o={text:s,createdAt:Date.now(),creator:{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL||""},attachmentUrl:a},p.addDoc(p.collection(p.getFirestore(),"yweet"),o),r(""),f();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e){if(e){var t=e.target.files[0],c=new FileReader;c.onloadend=function(e){var t=e.target.result;d(t)},c.readAsDataURL(t)}else console.log(O.current.value="")},f=function(){d(null),m(null)};return Object(y.jsxs)("div",{className:"factory-wrapper",children:[Object(y.jsx)("div",{className:"factory-title",children:"Home"}),Object(y.jsxs)("form",{className:"factory-form",onSubmit:h,children:[Object(y.jsxs)("div",{className:"factory-form-top",children:[Object(y.jsx)("img",{className:"user-img",src:t.photoURL?t.photoURL:"http://placehold.it/50x50"}),Object(y.jsx)("textarea",{placeholder:"what's happening?",className:"factory-input-text",value:s,onChange:function(e){var t=e.target.value;r(t)},type:"text",maxLength:120})]}),Object(y.jsxs)("div",{className:"factory-form-bottom",children:[Object(y.jsx)("input",{className:"factory-input-file",ref:O,type:"file",accept:"image/*",onChange:m,display:"none"}),u&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("img",{className:"attachment-img",src:u,alt:""}),Object(y.jsx)("button",{className:"factory-input-button",onClick:f,children:Object(y.jsx)(g.a,{icon:S.d})})]}),Object(y.jsx)("input",{className:"factory-input-submit",type:"submit",value:"Yweet"}),Object(y.jsx)("button",{type:"button",className:"factory-button-image",onClick:function(e){O.current.click()},children:Object(y.jsx)(g.a,{icon:S.b})})]})]})]})},A=c(35),U=function(e){var t=e.yweetObj,c=e.isOwner,n=Object(a.useState)(!1),s=Object(i.a)(n,2),r=s[0],o=s[1],l=Object(a.useState)(t.text),u=Object(i.a)(l,2),d=u[0],O=u[1],h=function(){var e=Object(b.a)(j.a.mark((function e(){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("are you sure?")){e.next=8;break}return p.deleteDoc(p.doc(p.getFirestore(),"yweet",t.id)),c=x.ref(x.getStorage(),t.attachmentUrl),e.next=6,x.deleteObject(c);case 6:a=e.sent,console.log(a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){return o((function(e){return!e}))};return Object(y.jsx)("div",{children:r?c&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),p.updateDoc(p.doc(p.getFirestore(),"yweet",t.id),{text:d}),m()},children:[Object(y.jsx)("input",{onChange:function(e){var t=e.target.value;O(t)},type:"text",value:d,required:!0}),Object(y.jsx)("input",{type:"submit",value:"edit",onClick:function(){}})]}),Object(y.jsx)("button",{onClick:m,children:"Cancel"})]}):Object(y.jsxs)("div",{className:"yweet-wrapper",children:[Object(y.jsx)("img",{src:t.creator.photoURL,className:"yweet-profile-img",alt:"http://placehold.it/50x50"}),Object(y.jsxs)("div",{className:"yweet-title",children:[t.creator.displayName," ",Object(y.jsx)("span",{style:{color:"gray",fontWeight:"400",fontSize:"12px"},children:new Date(t.createdAt).toLocaleTimeString()})]}),c&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("button",{className:"yweet-button-delete",onClick:h,children:Object(y.jsx)(g.a,{style:{fontSize:"18px"},icon:A.c})}),Object(y.jsx)("button",{className:"yweet-button-edit",onClick:m,children:Object(y.jsx)(g.a,{icon:A.a,style:{fontSize:"18px"}})})]}),Object(y.jsx)("div",{className:"yweet-text",children:t.text}),t.attachmentUrl&&Object(y.jsx)("img",{className:"yweet-attachment",src:t.attachmentUrl,alt:""})]})})},D=function(e){var t=e.yweets,c=e.userObj;return Object(y.jsx)("div",{className:"yweet-list",children:t.map((function(e){return Object(y.jsx)(U,{yweetObj:e,isOwner:e.creator.uid===c.uid},e.id)}))})},F=function(e){var t=e.userObj,c=Object(a.useState)([]),n=Object(i.a)(c,2),s=n[0],r=n[1];return Object(a.useEffect)((function(){var e=p.collection(p.getFirestore(),"yweet"),t=p.query(e,p.orderBy("createdAt","desc"));p.onSnapshot(t,(function(e){var t=e.docs.map((function(e){return Object(N.a)({id:e.id},e.data())}));r(t)}))}),[]),Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("div",{className:"align-center",children:[Object(y.jsx)(C,{userObj:t}),Object(y.jsx)(D,{yweets:s,userObj:t})]})})},L=function(e){var t=e.userObj,c=e.refreshUser,n=Object(l.f)(),s=Object(a.useState)([]),r=Object(i.a)(s,2),o=r[0],u=r[1],d=Object(a.useState)(t.displayName),O=Object(i.a)(d,2),h=O[0],m=O[1],x=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.getAuth().signOut();case 2:n.push("/");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){!function(){var e=p.collection(p.getFirestore(),"yweet"),c=p.query(e,p.where("creator.uid","==",t.uid),p.orderBy("createdAt","desc"));p.getDocs(c).then((function(e){var t=e.docs.map((function(e){return Object(N.a)({id:e.id},e.data())}));u(t)}))}()}),[]),Object(y.jsxs)("div",{className:"profile-wrapper align-center",children:[Object(y.jsxs)("div",{className:"profile-header",children:[Object(y.jsx)("button",{className:"backward-button",children:Object(y.jsx)(g.a,{icon:S.a})}),Object(y.jsxs)("div",{className:"profile-header-title",children:[Object(y.jsx)("div",{className:"profile-header-username",children:t.displayName}),Object(y.jsxs)("div",{className:"profile-header-yweet",children:[o.length," yweet"]})]})]}),Object(y.jsx)("div",{className:"profile-background"}),Object(y.jsxs)("div",{className:"profile-userInfo",children:[Object(y.jsx)("img",{className:"profile-user-img",src:t.photoURL}),Object(y.jsxs)("form",{className:"profile-edit-form",onSubmit:function(e){e.preventDefault(),f.updateProfile(t,{displayName:e.target.inputDisplayName.value}).then((function(e){c()}))},children:[Object(y.jsx)("label",{className:"profile-edit-form-label",children:"name"}),Object(y.jsx)("input",{className:"profile-edit-form-text",name:"inputDisplayName",type:"text",onChange:function(e){var t=e.target.value;m(t)},value:h}),Object(y.jsx)("button",{className:"profile-edit-form-submit",type:"submit",children:Object(y.jsx)(g.a,{icon:A.b})}),Object(y.jsx)("button",{className:"profile-edit-form-logout",type:"button",onClick:x,children:Object(y.jsx)(g.a,{icon:S.e})})]})]}),Object(y.jsx)(D,{yweets:o,userObj:t})]})},R=function(e){e.userObj;return Object(y.jsx)("nav",{className:"nav align-left",children:Object(y.jsxs)("ul",{className:"nav-list",children:[Object(y.jsx)("li",{className:"nav-top",children:Object(y.jsx)(g.a,{icon:v.c})}),Object(y.jsx)(o.b,{to:"/",children:Object(y.jsx)("li",{className:"nav-list-element",children:Object(y.jsxs)("div",{className:"nav-element-title nav-link",children:[Object(y.jsx)(g.a,{icon:S.c})," Home"]})})}),Object(y.jsx)(o.b,{to:"/profile",children:Object(y.jsx)("li",{className:"nav-list-element",children:Object(y.jsxs)("div",{className:"nav-element-title nav-link",children:[Object(y.jsx)(g.a,{icon:S.f})," My Profile"]})})})]})})},I=function(e){var t=e.isLoggedIn,c=e.userObj,n=e.refreshUser;return Object(y.jsx)(o.a,{children:Object(y.jsx)(l.c,{children:t?Object(y.jsxs)("div",{className:"home-wrapper",children:[Object(y.jsx)(R,{userObj:c}),Object(y.jsxs)(a.Fragment,{children:[Object(y.jsx)(l.a,{exact:!0,path:"/",children:Object(y.jsx)(F,{userObj:c})}),Object(y.jsx)(l.a,{exact:!0,path:"/profile",children:Object(y.jsx)(L,{refreshUser:n,userObj:c})})]}),Object(y.jsx)("div",{className:"align-right",children:"Pull-Right content"})]}):Object(y.jsx)(l.a,{exact:!0,path:"/",children:Object(y.jsx)(w,{})})})})},q=(c(69),c(70),c(71),c(72),c(73),c(74),c(75),c(76),function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(null),r=Object(i.a)(s,2),o=r[0],l=r[1];Object(a.useEffect)((function(){f.onAuthStateChanged(f.getAuth(),(function(e){l(e||null),n(!0)}))}),[]);return Object(y.jsx)(y.Fragment,{children:c?Object(y.jsx)(I,{refreshUser:function(){var e=f.getAuth().currentUser;l(Object.assign({},e)),l(e)},isLoggedIn:Boolean(o),userObj:o}):"initializing"})});r.a.render(Object(y.jsx)(n.a.StrictMode,{children:Object(y.jsx)(q,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.9363c3ae.chunk.js.map