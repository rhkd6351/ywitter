{"version":3,"sources":["fbInstance.js","routes/Auth.jsx","components/YweetFactory.js","components/Yweet.js","components/YweetList.js","routes/Home.jsx","routes/Profile.jsx","components/Navigation.js","components/Router.js","components/App.js","index.js"],"names":["firebase","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","authService","auth","dbService","firestore","storageService","storage","Auth","useState","email","setEmail","password","setPassword","newAccount","setNewAccount","loginError","setLoginError","onChange","event","target","name","value","onSubmit","a","preventDefault","createUserWithEmailAndPassword","getAuth","catch","error","message","signInWithEmailAndPassword","onSocialLogin","provider","GoogleAuthProvider","GithubAuthProvider","signInWithPopup","className","icon","faTwitter","style","color","type","placeholder","required","onClick","prev","faGoogle","faGithub","Date","getFullYear","YweetFactory","userObj","yweet","setYweet","attachment","setAttachment","image","useRef","attachmentUrl","attachmentRef","ref","getStorage","uid","uuidv4","uploadString","response","getDownloadURL","yweetObj","text","createdAt","now","creator","displayName","photoURL","addDoc","collection","getFirestore","onClearAttachment","onFileChange","theFile","files","fileReader","FileReader","onloadend","finishedEvent","result","readAsDataURL","console","log","current","src","maxLength","accept","display","alt","faMinusCircle","click","faCameraRetro","Yweet","isOwner","editMode","setEditMode","newYweet","setNewYweet","onDeleteClick","window","confirm","deleteDoc","doc","id","deleteObject","toggleEdit","updateDoc","fontWeight","fontSize","toLocaleString","faTrashAlt","faEdit","YweetList","yweets","map","data","Home","setYweets","useEffect","yweetRef","query","orderBy","onSnapshot","docs","Profile","refreshUser","history","useHistory","myYweets","setMyYweets","inputDisplayName","setInputDisplayName","onLogOutClick","signOut","push","where","getDocs","then","getMyYweets","updateProfile","Navigation","to","faHouseUser","faUsers","AppRouter","isLoggedIn","exact","path","App","init","setInit","setUserObj","onAuthStateChanged","user","currentUser","Object","assign","Boolean","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bff5c566.chunk.js","sourcesContent":["import * as firebase from \"firebase/app\";\nimport * as auth from \"firebase/auth\";\nimport * as firestore from \"firebase/firestore\";\nimport * as storage from \"firebase/storage\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDjsY4CxSNlT7by_bS-fF4862Ehbq5fqBo\",\n  authDomain: \"yweeter-ae7ef.firebaseapp.com\",\n  projectId: \"yweeter-ae7ef\",\n  storageBucket: \"yweeter-ae7ef.appspot.com\",\n  messagingSenderId: \"89780038175\",\n  appId: \"1:89780038175:web:5eb38006978b5b050d832a\",\n};\n\nfirebase.initializeApp(firebaseConfig);\n\nexport const authService = auth;\nexport const dbService = firestore;\nexport const storageService = storage;\n","import React, { useState } from \"react\";\nimport { authService } from \"fbInstance\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faGithub,\n  faGoogle,\n  faTwitter,\n} from \"@fortawesome/free-brands-svg-icons\";\n\nconst Auth = () => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [newAccount, setNewAccount] = useState(false);\n  const [loginError, setLoginError] = useState(\"\");\n\n  const onChange = (event) => {\n    const {\n      target: { name, value },\n    } = event;\n\n    if (name === \"email\") setEmail(value);\n\n    if (name === \"password\") setPassword(value);\n  };\n\n  const onSubmit = async (event) => {\n    event.preventDefault();\n    if (newAccount) {\n      await authService\n        .createUserWithEmailAndPassword(authService.getAuth(), email, password)\n        .catch((error) => {\n          setLoginError(error.message);\n        });\n    } else {\n      await authService\n        .signInWithEmailAndPassword(authService.getAuth(), email, password)\n        .catch((error) => {\n          setLoginError(error.message);\n        });\n    }\n  };\n\n  const toggleAccount = () => {\n    setNewAccount((prev) => !prev);\n    setLoginError(\"\");\n    setEmail(\"\");\n    setPassword(\"\");\n  };\n\n  const onSocialLogin = async (event) => {\n    const {\n      target: { name },\n    } = event;\n\n    let provider;\n    if (name === \"google\") {\n      provider = new authService.GoogleAuthProvider();\n    } else if (name === \"github\") {\n      provider = new authService.GithubAuthProvider();\n    }\n    await authService.signInWithPopup(authService.getAuth(), provider);\n  };\n\n  return (\n    <>\n      <div className=\"auth-wrapper\">\n        <div className=\"auth-container-left\">\n          <FontAwesomeIcon icon={faTwitter} className=\"twitter-icon\" />\n        </div>\n        <div className=\"auth-container-right\">\n          <div className=\"auth-container-right-element\">\n            <div className=\"auth-title\">\n              Let's get in Ywitter{\" \"}\n              <FontAwesomeIcon\n                icon={faTwitter}\n                className=\"title-twitter-icon\"\n                style={{ color: \"RGB(45, 155, 240)\" }}\n              />\n            </div>\n            <div className=\"auth-login-form\">\n              <form onSubmit={onSubmit}>\n                <input\n                  className=\"auth-email-input\"\n                  name=\"email\"\n                  type=\"email\"\n                  placeholder=\"email\"\n                  required\n                  value={email}\n                  onChange={onChange}\n                ></input>\n                <input\n                  className=\"auth-password-input submit\"\n                  name=\"password\"\n                  type=\"password\"\n                  placeholder=\"password\"\n                  required\n                  value={password}\n                  onChange={onChange}\n                ></input>\n                <br />\n                <input\n                  className=\"auth-submit\"\n                  type=\"submit\"\n                  value={newAccount ? \"Create Account\" : \"Sign in\"}\n                  required\n                ></input>\n                <br />\n\n                {loginError}\n                <div className=\"auth-toggle\" onClick={toggleAccount}>\n                  {newAccount ? \"Sign in\" : \"Create Account\"}\n                </div>\n                <br />\n              </form>\n            </div>\n            <div className=\"auth-login-social\">\n              <button\n                className=\"social-login-google\"\n                onClick={onSocialLogin}\n                name=\"google\"\n              >\n                <FontAwesomeIcon icon={faGoogle} /> continue with Google\n              </button>\n              <button\n                className=\"social-login-google\"\n                onClick={onSocialLogin}\n                name=\"github\"\n              >\n                <FontAwesomeIcon icon={faGithub} /> continue with Github\n              </button>\n            </div>\n          </div>\n        </div>\n        <div className=\"auth-footer\">\n          Nomad's course (Twitter clone coding) || Lyekwang &copy;{\" \"}\n          {new Date().getFullYear()}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Auth;\n","import {\n  faCameraRetro,\n  faMinusCircle,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { dbService, storageService } from \"fbInstance\";\nimport React, { useRef, useState } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nconst YweetFactory = ({ userObj }) => {\n  const [yweet, setYweet] = useState(\"\");\n  const [attachment, setAttachment] = useState(null);\n  const image = useRef(null);\n\n  const onSubmit = async (event) => {\n    event.preventDefault();\n    let attachmentUrl = \"\";\n    if (attachment !== null) {\n      const attachmentRef = storageService.ref(\n        storageService.getStorage(),\n        `${userObj.uid}/${uuidv4()}`\n      );\n      const response = await storageService.uploadString(\n        attachmentRef,\n        attachment,\n        \"data_url\"\n      );\n      attachmentUrl = await storageService.getDownloadURL(response.ref);\n    }\n    const yweetObj = {\n      text: yweet,\n      createdAt: Date.now(),\n      creator: {\n        uid: userObj.uid,\n        displayName: userObj.displayName,\n        photoURL: userObj.photoURL || \"\",\n      },\n      attachmentUrl,\n    };\n    dbService.addDoc(\n      dbService.collection(dbService.getFirestore(), \"yweet\"),\n      yweetObj\n    );\n    setYweet(\"\");\n    onClearAttachment();\n  };\n\n  const onChange = (event) => {\n    const {\n      target: { value },\n    } = event;\n    setYweet(value);\n  };\n\n  const onFileChange = (event) => {\n    if (!event) {\n      console.log((image.current.value = \"\"));\n    } else {\n      const {\n        target: { files },\n      } = event;\n      const theFile = files[0];\n      const fileReader = new FileReader();\n      fileReader.onloadend = (finishedEvent) => {\n        const {\n          target: { result },\n        } = finishedEvent;\n        setAttachment(result);\n      };\n      fileReader.readAsDataURL(theFile);\n    }\n  };\n\n  const onClearAttachment = () => {\n    setAttachment(null);\n    onFileChange(null);\n  };\n\n  const onImageButtonClick = (event) => {\n    image.current.click();\n  };\n  return (\n    <div className=\"factory-wrapper\">\n      <div className=\"factory-title\">Home</div>\n      <form className=\"factory-form\" onSubmit={onSubmit}>\n        <div className=\"factory-form-top\">\n          <img\n            className=\"user-img\"\n            src={\n              userObj.photoURL ? userObj.photoURL : \"http://placehold.it/50x50\"\n            }\n          />\n          <textarea\n            placeholder=\"what's happening?\"\n            className=\"factory-input-text\"\n            value={yweet}\n            onChange={onChange}\n            type=\"text\"\n            maxLength={120}\n          />\n        </div>\n        <div className=\"factory-form-bottom\">\n          <input\n            className=\"factory-input-file\"\n            ref={image}\n            type=\"file\"\n            accept=\"image/*\"\n            onChange={onFileChange}\n            display=\"none\"\n          ></input>\n          {attachment && (\n            <>\n              <img className=\"attachment-img\" src={attachment} alt=\"\" />\n              <button\n                className=\"factory-input-button\"\n                onClick={onClearAttachment}\n              >\n                <FontAwesomeIcon icon={faMinusCircle} />\n              </button>\n            </>\n          )}\n          <input className=\"factory-input-submit\" type=\"submit\" value=\"Yweet\" />\n          <button\n            type=\"button\"\n            className=\"factory-button-image\"\n            onClick={onImageButtonClick}\n          >\n            <FontAwesomeIcon icon={faCameraRetro} />\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default YweetFactory;\n","import React, { useState } from \"react\";\nimport { dbService, storageService } from \"fbInstance\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faMinus,\n  faMinusCircle,\n  faMinusSquare,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { faEdit, faTrashAlt } from \"@fortawesome/free-regular-svg-icons\";\n\nconst Yweet = ({ yweetObj, isOwner }) => {\n  const [editMode, setEditMode] = useState(false);\n  const [newYweet, setNewYweet] = useState(yweetObj.text);\n\n  const onDeleteClick = async () => {\n    const ok = window.confirm(\"are you sure?\");\n    if (ok) {\n      dbService.deleteDoc(\n        dbService.doc(dbService.getFirestore(), \"yweet\", yweetObj.id)\n      );\n      const response = storageService.ref(\n        storageService.getStorage(),\n        yweetObj.attachmentUrl\n      );\n      const result = await storageService.deleteObject(response);\n      console.log(result);\n    }\n  };\n\n  const onEditClick = () => {};\n\n  const toggleEdit = () => setEditMode((prev) => !prev);\n\n  const onChange = (event) => {\n    const {\n      target: { value },\n    } = event;\n    setNewYweet(value);\n  };\n\n  const onSubmit = (event) => {\n    event.preventDefault();\n    dbService.updateDoc(\n      dbService.doc(dbService.getFirestore(), \"yweet\", yweetObj.id),\n      { text: newYweet }\n    );\n    toggleEdit();\n  };\n\n  return (\n    <div>\n      {editMode ? (\n        isOwner && (\n          <>\n            <form onSubmit={onSubmit}>\n              <input\n                onChange={onChange}\n                type=\"text\"\n                value={newYweet}\n                required\n              ></input>\n              <input type=\"submit\" value=\"edit\" onClick={onEditClick}></input>\n            </form>\n            <button onClick={toggleEdit}>Cancel</button>\n          </>\n        )\n      ) : (\n        <div className=\"yweet-wrapper\">\n          <img\n            src={yweetObj.creator.photoURL}\n            className=\"yweet-profile-img\"\n            alt=\"http://placehold.it/50x50\"\n          />\n          <div className=\"yweet-title\">\n            {yweetObj.creator.displayName}{\" \"}\n            <span style={{ fontWeight: \"400\", fontSize: \"12px\" }}>\n              {new Date(yweetObj.createdAt).toLocaleString()}\n            </span>\n          </div>\n          {isOwner && (\n            <>\n              <button className=\"yweet-button-delete\" onClick={onDeleteClick}>\n                <FontAwesomeIcon\n                  style={{ fontSize: \"18px\" }}\n                  icon={faTrashAlt}\n                />\n              </button>\n              <button className=\"yweet-button-edit\" onClick={toggleEdit}>\n                <FontAwesomeIcon icon={faEdit} style={{ fontSize: \"18px\" }} />\n              </button>\n            </>\n          )}\n          <div className=\"yweet-text\">{yweetObj.text}</div>\n          {yweetObj.attachmentUrl && (\n            <img\n              className=\"yweet-attachment\"\n              src={yweetObj.attachmentUrl}\n              alt=\"\"\n            ></img>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Yweet;\n","import React from \"react\";\nimport Yweet from \"./Yweet\";\n\nconst YweetList = ({ yweets, userObj }) => {\n  return (\n    <div className=\"yweet-list\">\n      {yweets.map((data) => {\n        return (\n          <Yweet\n            key={data.id}\n            yweetObj={data}\n            isOwner={data.creator.uid === userObj.uid}\n          />\n        );\n      })}\n    </div>\n  );\n};\n\nexport default YweetList;\n","import YweetFactory from \"components/YweetFactory\";\nimport YweetList from \"components/YweetList\";\nimport { dbService } from \"fbInstance\";\nimport React, { useEffect, useState } from \"react\";\n\nconst Home = ({ userObj }) => {\n  const [yweets, setYweets] = useState([]);\n\n  useEffect(() => {\n    const yweetRef = dbService.collection(dbService.getFirestore(), \"yweet\");\n    const query = dbService.query(\n      yweetRef,\n      dbService.orderBy(\"createdAt\", \"desc\")\n    );\n    dbService.onSnapshot(\n      query,\n      (result) => {\n        const yweets = result.docs.map((doc) => {\n          return {\n            id: doc.id,\n            ...doc.data(),\n          };\n        });\n        setYweets(yweets);\n      }\n      // dbService.getDocs(query).then((result) => {\n      //   const yweets = result.docs.map((doc) => {\n      //     return {\n      //       id: doc.id,\n      //       ...doc.data(),\n      //     };\n      //   });\n      //   setYweets(yweets);\n      // })\n    );\n  }, []);\n\n  return (\n    <>\n      <div className=\"align-center\">\n        <YweetFactory userObj={userObj} />\n        <YweetList yweets={yweets} userObj={userObj} />\n      </div>\n    </>\n  );\n};\n\nexport default Home;\n","import React, { useEffect, useState } from \"react\";\nimport { authService, dbService } from \"fbInstance\";\nimport { useHistory } from \"react-router\";\nimport YweetList from \"components/YweetList\";\n\nconst Profile = ({ userObj, refreshUser }) => {\n  const history = useHistory();\n  const [myYweets, setMyYweets] = useState([]);\n  const [inputDisplayName, setInputDisplayName] = useState(userObj.displayName);\n\n  const onLogOutClick = async () => {\n    await authService.getAuth().signOut();\n    history.push(\"/\");\n  };\n\n  const getMyYweets = () => {\n    // dbService.onSnapshot(\n    const yweetRef = dbService.collection(dbService.getFirestore(), \"yweet\");\n    const query = dbService.query(\n      yweetRef,\n      dbService.where(\"creator.uid\", \"==\", userObj.uid),\n      dbService.orderBy(\"createdAt\", \"desc\")\n    );\n\n    dbService.getDocs(query).then((result) => {\n      const yweets = result.docs.map((doc) => {\n        return {\n          id: doc.id,\n          ...doc.data(),\n        };\n      });\n      setMyYweets(yweets);\n    });\n  };\n\n  const onSubmitHandler = (event) => {\n    event.preventDefault();\n    authService\n      .updateProfile(userObj, {\n        displayName: event.target.inputDisplayName.value,\n      })\n      .then((result) => {\n        refreshUser();\n      });\n  };\n\n  const onChangeHandler = (event) => {\n    const {\n      target: { value },\n    } = event;\n\n    setInputDisplayName(value);\n  };\n\n  useEffect(() => {\n    getMyYweets();\n  }, []);\n\n  return (\n    <>\n      <form onSubmit={onSubmitHandler}>\n        <input\n          name=\"inputDisplayName\"\n          type=\"text\"\n          onChange={onChangeHandler}\n          value={inputDisplayName}\n        />\n        <input type=\"submit\" value=\"change\" />\n      </form>\n      <button onClick={onLogOutClick}>Log out</button>\n      <YweetList yweets={myYweets} userObj={userObj} />\n    </>\n  );\n};\n\nexport default Profile;\n","import { faTwitter } from \"@fortawesome/free-brands-svg-icons\";\nimport {\n  faHome,\n  faHouseUser,\n  faUser,\n  faUsers,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst Navigation = ({ userObj }) => (\n  <nav className=\"nav align-left\">\n    <ul className=\"nav-list\">\n      <li className=\"nav-top\">\n        <FontAwesomeIcon icon={faTwitter} />\n      </li>\n      <Link to=\"/\">\n        <li className=\"nav-list-element\">\n          <div className=\"nav-element-title nav-link\">\n            <FontAwesomeIcon icon={faHouseUser} /> Home\n          </div>\n        </li>\n      </Link>\n      <Link to=\"/profile\">\n        <li className=\"nav-list-element\">\n          <div className=\"nav-element-title nav-link\">\n            <FontAwesomeIcon icon={faUsers} /> My Profile\n          </div>\n        </li>\n      </Link>\n    </ul>\n  </nav>\n);\n\nexport default Navigation;\n","import React, { Fragment } from \"react\";\nimport { HashRouter as Router, Route, Switch } from \"react-router-dom\";\nimport Auth from \"routes/Auth\";\nimport Home from \"routes/Home\";\nimport Profile from \"routes/Profile\";\nimport Navigation from \"components/Navigation\";\n\nconst AppRouter = ({ isLoggedIn, userObj, refreshUser }) => {\n  //   const [isLoggedIn, setIsLoggedIn] = useState(false);\n  //   라우트 기능만 하는것이 적합, 스테이트 관리는 상위 컴포넌트로 빼준다.\n  return (\n    <Router>\n      <Switch>\n        {isLoggedIn ? (\n          <div className=\"home-wrapper\">\n            <Navigation userObj={userObj} />\n            <Fragment>\n              <Route exact path=\"/\">\n                <Home userObj={userObj} />\n              </Route>\n              <Route exact path=\"/profile\">\n                <Profile refreshUser={refreshUser} userObj={userObj} />\n              </Route>\n            </Fragment>\n            <div className=\"align-right\">Pull-Right content</div>\n          </div>\n        ) : (\n          <Route exact path=\"/\">\n            <Auth />\n          </Route>\n        )}\n      </Switch>\n    </Router>\n  );\n};\n\nexport default AppRouter;\n","import { useEffect, useState } from \"react\";\nimport AppRouter from \"./Router\";\nimport { authService } from \"fbInstance\";\n\nimport \"css/common.css\";\nimport \"css/home.css\";\nimport \"css/navigation.css\";\nimport \"css/auth.css\";\nimport \"css/yweetFactory.css\";\nimport \"css/yweet.css\";\nimport \"css/right.css\";\n\nconst App = () => {\n  const [init, setInit] = useState(false);\n  const [userObj, setUserObj] = useState(null);\n\n  useEffect(() => {\n    authService.onAuthStateChanged(authService.getAuth(), (user) => {\n      if (user) setUserObj(user);\n      else setUserObj(null);\n      setInit(true);\n    });\n  }, []);\n\n  const refreshUser = () => {\n    const user = authService.getAuth().currentUser;\n    setUserObj(Object.assign({}, user)); //이렇게 복제된 객체는 updateProfile에 넘길 때 오류발생.. 다시 user 원본으로 업데이트 시켜주는 작업 뒤에 진행\n    setUserObj(user);\n  };\n\n  return (\n    <>\n      {init ? (\n        <AppRouter\n          refreshUser={refreshUser}\n          isLoggedIn={Boolean(userObj)}\n          userObj={userObj}\n        />\n      ) : (\n        \"initializing\"\n      )}\n    </>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}