(this.webpackJsonpywitter=this.webpackJsonpywitter||[]).push([[0],{69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var c=n(10),a=n.n(c),r=n(46),s=n.n(r),i=n(11),o=n(35),u=n(14),l=n(0),j=n.n(l),b=n(1),d=n(47),O=n(51),h=n(48),m=n(52);d.a({apiKey:"AIzaSyDjsY4CxSNlT7by_bS-fF4862Ehbq5fqBo",authDomain:"yweeter-ae7ef.firebaseapp.com",projectId:"yweeter-ae7ef",storageBucket:"yweeter-ae7ef.appspot.com",messagingSenderId:"89780038175",appId:"1:89780038175:web:5eb38006978b5b050d832a"});var f=O,x=h,p=m,g=n(21),v=n(29),y=n(6),w=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(i.a)(r,2),o=s[0],u=s[1],l=Object(c.useState)(!1),d=Object(i.a)(l,2),O=d[0],h=d[1],m=Object(c.useState)(""),x=Object(i.a)(m,2),p=x[0],w=x[1],N=function(e){var t=e.target,n=t.name,c=t.value;"email"===n&&a(c),"password"===n&&u(c)},S=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!O){e.next=6;break}return e.next=4,f.createUserWithEmailAndPassword(f.getAuth(),n,o).catch((function(e){w(e.message)}));case 4:e.next=8;break;case 6:return e.next=8,f.signInWithEmailAndPassword(f.getAuth(),n,o).catch((function(e){w(e.message)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)?c=new f.GoogleAuthProvider:"github"===n&&(c=new f.GithubAuthProvider),e.next=4,f.signInWithPopup(f.getAuth(),c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("div",{className:"auth-wrapper",children:[Object(y.jsx)("div",{className:"auth-container-left",children:Object(y.jsx)(g.a,{icon:v.c,className:"twitter-icon"})}),Object(y.jsx)("div",{className:"auth-container-right",children:Object(y.jsxs)("div",{className:"auth-container-right-element",children:[Object(y.jsxs)("div",{className:"auth-title",children:["Let's get in Ywitter"," ",Object(y.jsx)(g.a,{icon:v.c,className:"title-twitter-icon",style:{color:"RGB(45, 155, 240)"}})]}),Object(y.jsx)("div",{className:"auth-login-form",children:Object(y.jsxs)("form",{onSubmit:S,children:[Object(y.jsx)("input",{className:"auth-email-input",name:"email",type:"email",placeholder:"email",required:!0,value:n,onChange:N}),Object(y.jsx)("input",{className:"auth-password-input submit",name:"password",type:"password",placeholder:"password",required:!0,value:o,onChange:N}),Object(y.jsx)("br",{}),Object(y.jsx)("input",{className:"auth-submit",type:"submit",value:O?"Create Account":"Sign in",required:!0}),Object(y.jsx)("br",{}),p,Object(y.jsx)("div",{className:"auth-toggle",onClick:function(){h((function(e){return!e})),w(""),a(""),u("")},children:O?"Sign in":"Create Account"}),Object(y.jsx)("br",{})]})}),Object(y.jsxs)("div",{className:"auth-login-social",children:[Object(y.jsxs)("button",{className:"social-login-google",onClick:k,name:"google",children:[Object(y.jsx)(g.a,{icon:v.b})," continue with Google"]}),Object(y.jsxs)("button",{className:"social-login-google",onClick:k,name:"github",children:[Object(y.jsx)(g.a,{icon:v.a})," continue with Github"]})]})]})}),Object(y.jsxs)("div",{className:"auth-footer",children:["Nomad's course (Twitter clone coding) || Lyekwang \xa9"," ",(new Date).getFullYear()]})]})})},N=n(39),S=n(28),k=n(78),C=function(e){var t=e.userObj,n=Object(c.useState)(""),a=Object(i.a)(n,2),r=a[0],s=a[1],o=Object(c.useState)(null),u=Object(i.a)(o,2),l=u[0],d=u[1],O=Object(c.useRef)(null),h=function(){var e=Object(b.a)(j.a.mark((function e(n){var c,a,i,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),c="",null===l){e.next=10;break}return a=p.ref(p.getStorage(),"".concat(t.uid,"/").concat(Object(k.a)())),e.next=6,p.uploadString(a,l,"data_url");case 6:return i=e.sent,e.next=9,p.getDownloadURL(i.ref);case 9:c=e.sent;case 10:o={text:r,createdAt:Date.now(),creator:{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL||""},attachmentUrl:c},x.addDoc(x.collection(x.getFirestore(),"yweet"),o),s(""),f();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e){if(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.target.result;d(t)},n.readAsDataURL(t)}else console.log(O.current.value="")},f=function(){d(null),m(null)};return Object(y.jsxs)("div",{className:"factory-wrapper",children:[Object(y.jsx)("div",{className:"factory-title",children:"Home"}),Object(y.jsxs)("form",{className:"factory-form",onSubmit:h,children:[Object(y.jsxs)("div",{className:"factory-form-top",children:[Object(y.jsx)("img",{className:"user-img",src:t.photoURL?t.photoURL:"http://placehold.it/50x50"}),Object(y.jsx)("textarea",{placeholder:"what's happening?",className:"factory-input-text",value:r,onChange:function(e){var t=e.target.value;s(t)},type:"text",maxLength:120})]}),Object(y.jsxs)("div",{className:"factory-form-bottom",children:[Object(y.jsx)("input",{className:"factory-input-file",ref:O,type:"file",accept:"image/*",onChange:m,display:"none"}),l&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("img",{className:"attachment-img",src:l,alt:""}),Object(y.jsx)("button",{className:"factory-input-button",onClick:f,children:Object(y.jsx)(g.a,{icon:S.c})})]}),Object(y.jsx)("input",{className:"factory-input-submit",type:"submit",value:"Yweet"}),Object(y.jsx)("button",{type:"button",className:"factory-button-image",onClick:function(e){O.current.click()},children:Object(y.jsx)(g.a,{icon:S.a})})]})]})]})},A=n(42),D=function(e){var t=e.yweetObj,n=e.isOwner,a=Object(c.useState)(!1),r=Object(i.a)(a,2),s=r[0],o=r[1],u=Object(c.useState)(t.text),l=Object(i.a)(u,2),d=l[0],O=l[1],h=function(){var e=Object(b.a)(j.a.mark((function e(){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("are you sure?")){e.next=8;break}return x.deleteDoc(x.doc(x.getFirestore(),"yweet",t.id)),n=p.ref(p.getStorage(),t.attachmentUrl),e.next=6,p.deleteObject(n);case 6:c=e.sent,console.log(c);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){return o((function(e){return!e}))};return Object(y.jsx)("div",{children:s?n&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),x.updateDoc(x.doc(x.getFirestore(),"yweet",t.id),{text:d}),m()},children:[Object(y.jsx)("input",{onChange:function(e){var t=e.target.value;O(t)},type:"text",value:d,required:!0}),Object(y.jsx)("input",{type:"submit",value:"edit",onClick:function(){}})]}),Object(y.jsx)("button",{onClick:m,children:"Cancel"})]}):Object(y.jsxs)("div",{className:"yweet-wrapper",children:[Object(y.jsx)("img",{src:t.creator.photoURL,className:"yweet-profile-img",alt:"http://placehold.it/50x50"}),Object(y.jsxs)("div",{className:"yweet-title",children:[t.creator.displayName," ",Object(y.jsx)("span",{style:{fontWeight:"400",fontSize:"12px"},children:new Date(t.createdAt).toLocaleString()})]}),n&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("button",{className:"yweet-button-delete",onClick:h,children:Object(y.jsx)(g.a,{style:{fontSize:"18px"},icon:A.b})}),Object(y.jsx)("button",{className:"yweet-button-edit",onClick:m,children:Object(y.jsx)(g.a,{icon:A.a,style:{fontSize:"18px"}})})]}),Object(y.jsx)("div",{className:"yweet-text",children:t.text}),t.attachmentUrl&&Object(y.jsx)("img",{className:"yweet-attachment",src:t.attachmentUrl,alt:""})]})})},U=function(e){var t=e.yweets,n=e.userObj;return Object(y.jsx)("div",{className:"yweet-list",children:t.map((function(e){return Object(y.jsx)(D,{yweetObj:e,isOwner:e.creator.uid===n.uid},e.id)}))})},F=function(e){var t=e.userObj,n=Object(c.useState)([]),a=Object(i.a)(n,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){var e=x.collection(x.getFirestore(),"yweet"),t=x.query(e,x.orderBy("createdAt","desc"));x.onSnapshot(t,(function(e){var t=e.docs.map((function(e){return Object(N.a)({id:e.id},e.data())}));s(t)}))}),[]),Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("div",{className:"align-center",children:[Object(y.jsx)(C,{userObj:t}),Object(y.jsx)(U,{yweets:r,userObj:t})]})})},L=function(e){var t=e.userObj,n=e.refreshUser,a=Object(u.f)(),r=Object(c.useState)([]),s=Object(i.a)(r,2),o=s[0],l=s[1],d=Object(c.useState)(t.displayName),O=Object(i.a)(d,2),h=O[0],m=O[1],p=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.getAuth().signOut();case 2:a.push("/");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){!function(){var e=x.collection(x.getFirestore(),"yweet"),n=x.query(e,x.where("creator.uid","==",t.uid),x.orderBy("createdAt","desc"));x.getDocs(n).then((function(e){var t=e.docs.map((function(e){return Object(N.a)({id:e.id},e.data())}));l(t)}))}()}),[]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),f.updateProfile(t,{displayName:e.target.inputDisplayName.value}).then((function(e){n()}))},children:[Object(y.jsx)("input",{name:"inputDisplayName",type:"text",onChange:function(e){var t=e.target.value;m(t)},value:h}),Object(y.jsx)("input",{type:"submit",value:"change"})]}),Object(y.jsx)("button",{onClick:p,children:"Log out"}),Object(y.jsx)(U,{yweets:o,userObj:t})]})},R=function(e){e.userObj;return Object(y.jsx)("nav",{className:"nav align-left",children:Object(y.jsxs)("ul",{className:"nav-list",children:[Object(y.jsx)("li",{className:"nav-top",children:Object(y.jsx)(g.a,{icon:v.c})}),Object(y.jsx)(o.b,{to:"/",children:Object(y.jsx)("li",{className:"nav-list-element",children:Object(y.jsxs)("div",{className:"nav-element-title nav-link",children:[Object(y.jsx)(g.a,{icon:S.b})," Home"]})})}),Object(y.jsx)(o.b,{to:"/profile",children:Object(y.jsx)("li",{className:"nav-list-element",children:Object(y.jsxs)("div",{className:"nav-element-title nav-link",children:[Object(y.jsx)(g.a,{icon:S.d})," My Profile"]})})})]})})},I=function(e){var t=e.isLoggedIn,n=e.userObj,a=e.refreshUser;return Object(y.jsx)(o.a,{children:Object(y.jsx)(u.c,{children:t?Object(y.jsxs)("div",{className:"home-wrapper",children:[Object(y.jsx)(R,{userObj:n}),Object(y.jsxs)(c.Fragment,{children:[Object(y.jsx)(u.a,{exact:!0,path:"/",children:Object(y.jsx)(F,{userObj:n})}),Object(y.jsx)(u.a,{exact:!0,path:"/profile",children:Object(y.jsx)(L,{refreshUser:a,userObj:n})})]}),Object(y.jsx)("div",{className:"align-right",children:"Pull-Right content"})]}):Object(y.jsx)(u.a,{exact:!0,path:"/",children:Object(y.jsx)(w,{})})})})},q=(n(69),n(70),n(71),n(72),n(73),n(74),n(75),function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(null),s=Object(i.a)(r,2),o=s[0],u=s[1];Object(c.useEffect)((function(){f.onAuthStateChanged(f.getAuth(),(function(e){u(e||null),a(!0)}))}),[]);return Object(y.jsx)(y.Fragment,{children:n?Object(y.jsx)(I,{refreshUser:function(){var e=f.getAuth().currentUser;u(Object.assign({},e)),u(e)},isLoggedIn:Boolean(o),userObj:o}):"initializing"})});s.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(q,{})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.bff5c566.chunk.js.map